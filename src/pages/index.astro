---
// src/pages/index.astro
import MainLayout from "../layouts/MainLayout.astro";
import Hero from "../components/vue/Hero.vue";
import CareerBanner from "../components/vue/CareerBanner.vue";
import NoticiasSlider from "../components/vue/noticiasslider.vue";
import Footer from "../components/vue/footer.vue";
import type { ImageMetadata } from "astro";
import { careers } from "../DB/db.js";
// import connectDB from "../DB/conect.js";

import "../styles/global.css";

// 1. Agrega `bgImg` a tu interfaz para que TypeScript la reconozca
interface Career {
    name: string;
    img: ImageMetadata;
    bgImg: ImageMetadata; // <- Nueva propiedad
    description: string;
}

// Conecta a la base de datos en el servidor antes de usar datos que la requieran.
// await connectDB(); // Deshabilitado en la home para evitar fallos si la BD no está disponible
---

<MainLayout title="UTNay - Universidad Tecnológica de Nayarit">
    <section id="inicio" class="h-screen relative">
        <div class="absolute inset-0 bg-black/50"></div>
        <Hero client:load />
    </section>
    <div class="text-center bg-white py-20 px-4">
        <h2 class="text-4xl font-bold text-gray-800 mb-2">
            Noticias Recientes
        </h2>
        <p class="text-gray-600 mb-8">
            Mantente informado con las últimas novedades de nuestra universidad.
        </p>
        <div class="max-w-8xl mx-auto">
            <NoticiasSlider client:load />
        </div>
    </div>
        <section id="carreras" class="my-20 mx-auto">
            <div class="text-center bg-gray-100 py-20 px-4">
                <h2 class="text-4xl font-bold text-gray-800 mb-2">
                    Oferta Educativa
                </h2>
                <p class="text-gray-600">
                    Explora las carreras que te llevarán al siguiente nivel.
                </p>
            </div>

            <div class="flex flex-col">
                {
                    careers.map((career) => (
                        <CareerBanner
                            title={career.name}
                            imageUrl={career.img}
                            description={career.description}
                            backgroundImage={career.background}
                            client:visible
                        />
                    ))
                }
            </div>
        </section>
    </div>
    <Footer client:only="vue" />
</MainLayout>
<!-- <script src="../scripts/main.js"></script> -->
